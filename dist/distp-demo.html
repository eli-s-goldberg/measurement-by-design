<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Distribution Business Case Demo | Data Matters</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight.css">
<link rel="preload" as="style" href="./_observablehq/stdlib/inputs.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight.css">
<link rel="stylesheet" type="text/css" href="./_observablehq/stdlib/inputs.css">
<link rel="modulepreload" href="./_observablehq/client.js">
<link rel="modulepreload" href="./_observablehq/runtime.js">
<link rel="modulepreload" href="./_observablehq/stdlib.js">
<link rel="modulepreload" href="./_import/components/DistP.53f5d4a3.js">
<link rel="modulepreload" href="./_npm/@observablehq/plot@0.6.15/_esm.js">
<link rel="modulepreload" href="https://cdn.jsdelivr.net/npm/d3@7/+esm">
<link rel="modulepreload" href="./_node/d3-require@1.3.0/index.js">
<link rel="modulepreload" href="./_observablehq/stdlib/inputs.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/_esm.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3@7.9.0/_esm.js">
<link rel="modulepreload" href="./_npm/interval-tree-1d@1.0.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-axis@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-brush@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-chord@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-contour@4.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-delaunay@6.0.4/_esm.js">
<link rel="modulepreload" href="./_npm/d3-dispatch@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-drag@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-ease@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-fetch@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-force@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-geo@3.1.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-hierarchy@3.1.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-path@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-polygon@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-quadtree@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-random@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/_esm.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-selection@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-shape@3.2.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/_esm.js">
<link rel="modulepreload" href="./_npm/d3-timer@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-transition@3.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/d3-zoom@3.0.0/_esm.js">
<link rel="modulepreload" href="./_npm/binary-search-bounds@2.0.5/_esm.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/_esm.js">
<link rel="modulepreload" href="./_npm/delaunator@5.0.1/_esm.js">
<link rel="modulepreload" href="./_npm/robust-predicates@3.0.2/_esm.js">
<script type="module">

import {define} from "./_observablehq/client.js";

define({id: "6dfb8953", outputs: ["DistP","distributions"], body: async () => {
const {DistP, distributions} = await import("./_import/components/DistP.53f5d4a3.js");

return {DistP,distributions};
}});

define({id: "587ed566", inputs: ["view","Inputs"], outputs: ["ndp"], body: (view,Inputs) => {
const ndp = view(Inputs.form(
    {
        'mean': Inputs.range([0, 1], { label: "Mean", value: 0.25, 
                    step: 0.01 }),
        'std' : Inputs.range([0.1, 1], { label: "Standard Deviation", value: 0.15, step: 0.01 }),
        'size' : Inputs.range([100, 500000], { label: "Size", value: 50000, step: 100, disabled:true }),
        'lowerBound' : Inputs.range([0, 10], { label: "Lower Bound", value: 0, step: 1, disabled:true }),
        'upperBound' : Inputs.range([0.1, 100000], { label: "Upper Bound", value: 1, step: 0.1, disabled:true }),
    }
    ));
    
return {ndp};
}});

define({id: "ae457847", inputs: ["DistP","distributions","ndp","view"], outputs: ["normalDist"], body: (DistP,distributions,ndp,view) => {
const normalDist = new DistP({
    name: "Normal Distribution",
    distfunc: distributions.normal,
    params: { mean: ndp.mean, std: ndp.std },
    bounds: [ndp.lowerBound, ndp.upperBound],
    size: ndp.size
});
view(normalDist.plot())
return {normalDist};
}});

define({id: "edb90f45", inputs: ["view","Inputs"], outputs: ["ldp"], body: (view,Inputs) => {
const ldp = view(Inputs.form(
    {
        'mean': Inputs.range([0, 1], { label: "Mean", value: 0.2, step: 0.1 }),
        'shape' : Inputs.range([0.1, 1], { label: "Shape", value: 0.8, step: 0.01 }),
        'size' : Inputs.range([1000, 100000], { label: "Size", value: 50000, step: 1000,disabled:true }),
        'lowerBound' : Inputs.range([0, 10], { label: "Lower Bound", value: 0, step: 1, disabled:true }),
        'upperBound' : Inputs.range([0.1, 1], { label: "Upper Bound", value: 100000, step: 0.1, disabled:true}),
    }
    ));
    
return {ldp};
}});

define({id: "20c6309b", inputs: ["DistP","distributions","ldp","view"], outputs: ["lognormalDist"], body: (DistP,distributions,ldp,view) => {
// Create a lognormal distribution
const lognormalDist = new DistP({
    name: "Lognormal Distribution",
    distfunc: distributions.lognormal,
    params: { mean: ldp.mean, shape: ldp.shape },
    bounds: [ldp.lowerBound, ldp.upperBound],
    size: ldp.size,
        boundMethod: "stack",
});

view(lognormalDist.plot())
return {lognormalDist};
}});

define({id: "03fba68e", inputs: ["view","Inputs"], outputs: ["bdp"], body: (view,Inputs) => {
const bdp = view(Inputs.form(
    {
        'alpha': Inputs.range([0.1, 100],
             { label: "Alpha", value: 2, step: 0.1 }),
        'beta' : Inputs.range([0.1, 100], 
            { label: "Beta", value: 2, step: 0.1 }),
        'size' : Inputs.range([1000, 100000], 
            { label: "Size", value: 50000, step: 1000, disabled:true }),
        'lowerBound' : Inputs.range([0, 10], { label: "Lower Bound", value: 0, step: 1, disabled:true }),
        'upperBound' : Inputs.range([0.1, 100000], { label: "Upper Bound", value: 100000, step: 0.1, disabled:true  }),
    }
    ));
    
return {bdp};
}});

define({id: "dd578002", inputs: ["DistP","distributions","bdp","view"], outputs: ["betaDist"], body: (DistP,distributions,bdp,view) => {
// Create a lognormal distribution
const betaDist = new DistP({
    name: "Beta Distribution",
    distfunc: distributions.beta,
    params: { alpha: bdp.alpha, beta: bdp.beta },
    bounds: [bdp.lowerBound, bdp.upperBound],
    size: bdp.size
});

view(betaDist.plot())
return {betaDist};
}});

define({id: "91a92b80", inputs: ["DistP","distributions","view"], outputs: ["diseasePrevalence"], body: (DistP,distributions,view) => {
// Create a lognormal distribution
const diseasePrevalence = new DistP({
    name: "Disease Prevalence Distribution",
    distfunc: distributions.lognormal,
    pparams: { mean: 0.2, shape: 0.9 },
    bounds: [0, 10],
    boundMethod: "stack",
    size: 5000
});

view(diseasePrevalence.plot())
return {diseasePrevalence};
}});

define({id: "77300cec", inputs: ["DistP","distributions"], outputs: ["normalBase","uniformDist"], body: (DistP,distributions) => {
// Example using chain operations with different distributions
const normalBase = new DistP({
    name: "Base Normal",
    distfunc: distributions.normal,
    params: { mean: 100, std: 10 },
    size: 5000,
    bounds: [0, 200]
});

const uniformDist = new DistP({
    name: "Uniform",
    distfunc: distributions.uniform,
    params: { min: 0.8, max: 1.2 },
    size: 5000
});
return {normalBase,uniformDist};
}});

define({id: "8031f6ed", inputs: ["DistP","normalBase","uniformDist","view"], outputs: ["addResult"], body: (DistP,normalBase,uniformDist,view) => {
// Chain operations
const addResult = new DistP({
    name: "Normal + Lognormal",
    samples: [...normalBase.samples],
    size: 5000
}).chainAdd(uniformDist);
view(addResult.plot())
return {addResult};
}});

define({id: "a4a54ee6", inputs: ["DistP","normalBase","uniformDist","view"], outputs: ["multResult"], body: (DistP,normalBase,uniformDist,view) => {
// Chain operations
const multResult = new DistP({
    name: "Normal × Uniform",
    samples: [...normalBase.samples],
    size: 5000
}).chainMult(uniformDist);

//plot it
view(multResult.plot())
return {multResult};
}});

define({id: "47e5da48", inputs: ["DistP","normalBase","uniformDist","view"], outputs: ["divResult"], body: (DistP,normalBase,uniformDist,view) => {
const divResult = new DistP({
    name: "Normal ÷ Uniform",
    samples: [...normalBase.samples],
    size: 5000,
}).chainDivide(uniformDist);

//plot it
view(divResult.plot())
return {divResult};
}});

</script>
<input id="observablehq-sidebar-toggle" type="checkbox" title="Toggle sidebar">
<label id="observablehq-sidebar-backdrop" for="observablehq-sidebar-toggle"></label>
<nav id="observablehq-sidebar">
  <ol>
    <label id="observablehq-sidebar-close" for="observablehq-sidebar-toggle"></label>
    <li class="observablehq-link"><a href="./">Data Matters</a></li>
  </ol>
  <ol>
    <li class="observablehq-link"><a href="./">Introduction</a></li>
  </ol>
  <section>
    <summary>Experimental Design</summary>
    <ol>
    <li class="observablehq-link"><a href="./experimental-design">Experimental Design </a></li>
    <li class="observablehq-link"><a href="./parallel-arm-designs">Individual Randomized Parallel Designs</a></li>
    <li class="observablehq-link"><a href="./cluster-randomized-designs">Individual Randomized Cluster Designs</a></li>
    </ol>
  </section>
  <section class="observablehq-section-active">
    <summary>Data Science Experiments</summary>
    <ol>
    <li class="observablehq-link"><a href="./random-forest">Random Forests</a></li>
    <li class="observablehq-link"><a href="./mass-balance-business-models">Mass Balance Business Models</a></li>
    <li class="observablehq-link"><a href="./live-table-data">Live Tables</a></li>
    <li class="observablehq-link observablehq-link-active"><a href="./distp-demo">Distribution Modeling</a></li>
    </ol>
  </section>
  <section>
    <summary>Transport Modeling</summary>
    <ol>
    <li class="observablehq-link"><a href="./pbpk">Drug Elimination</a></li>
    </ol>
  </section>
  <section>
    <summary>Ukelele Modeling</summary>
    <ol>
    <li class="observablehq-link"><a href="./ukulele">Chord Maker</a></li>
    <li class="observablehq-link"><a href="./ukutabs/blackbird">Blackbird - The Beatles</a></li>
    </ol>
  </section>
  <section>
    <summary>Miscellaneous Visualizations</summary>
    <ol>
    <li class="observablehq-link"><a href="./happy-city">Is Minneapolis &#x27;happier&#x27; than Boston?</a></li>
    <li class="observablehq-link"><a href="./diddy-did-he">Diddy didn&#x27;t, did he?</a></li>
    <li class="observablehq-link"><a href="./fema-votes">FEMA Votes</a></li>
    </ol>
  </section>
  <section>
    <summary>Healthcare Diatribes</summary>
    <ol>
    <li class="observablehq-link"><a href="./stars-hedis-insanity">What are stars?</a></li>
    </ol>
  </section>
  <section>
    <summary>Self Aggrandizing</summary>
    <ol>
    <li class="observablehq-link"><a href="./podcasts">Podcasts &amp; Presentations</a></li>
    </ol>
  </section>
</nav>
<script>{Object.assign(document.createElement("a"),{href:""}).password&&location.replace(location.href);const e=document.querySelector("#observablehq-sidebar"),t=document.querySelector("#observablehq-sidebar-toggle"),r=sessionStorage.getItem("observablehq-sidebar");r?t.checked=r==="true":t.indeterminate=!0;for(const o of document.querySelectorAll("#observablehq-sidebar summary")){const s=o.parentElement;switch(sessionStorage.getItem(`observablehq-sidebar:${o.textContent}`)){case"true":s.open=!0;break;case"false":s.classList.contains("observablehq-section-active")||(s.open=!1);break}}addEventListener("beforeunload",()=>sessionStorage.setItem("observablehq-sidebar-scrolly",`${e.scrollTop}`));const a=sessionStorage.getItem("observablehq-sidebar-scrolly");a!=null&&(e.style.cssText="overflow: hidden;",e.scrollTop=+a,e.style.cssText="");}</script>
<aside id="observablehq-toc" data-selector="h1:not(:first-of-type)[id], h2:first-child[id], :not(h1) + h2[id]">
<nav>
<div>Contents</div>
<ol>
<li class="observablehq-secondary-link"><a href="#instantiating-and-plotting-distributions">Instantiating and plotting distributions</a></li>
<li class="observablehq-secondary-link"><a href="#operations-on-distributions-for-business-cases">Operations on distributions for business cases</a></li>
<li class="observablehq-secondary-link"><a href="#let&#x27;s-explore-chaining">Let&#x27;s explore chaining</a></li>
</ol>
</nav>
</aside>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<div id="cell-6dfb8953" class="observablehq observablehq--block"></div>
<h1 id="distributions" tabindex="-1"><a class="observablehq-header-anchor" href="#distributions">Distributions</a></h1>
<p>There are rarely truly static parameters in life. In business, either. Creating distribution-based business cases is pretty easy to do and a powerful way to model and add probability to your estimates.</p>
<p>Let's create the fundamental primatives for working with distributions. Then let's introduce some math to manipulate them.</p>
<h2 id="instantiating-and-plotting-distributions" tabindex="-1"><a class="observablehq-header-anchor" href="#instantiating-and-plotting-distributions">Instantiating and plotting distributions</a></h2>
<p>Let's first create some distributions using the <code>DistP</code> class we just made, starting with a normal and a lognormal distribution.</p>
<p>The following distributions functions are available.</p>
<ol>
<li>normal</li>
<li>uniform</li>
<li>exponential</li>
<li>lognormal</li>
<li>triangular</li>
<li>beta</li>
<li>gamma</li>
<li>weibull</li>
<li>custom</li>
</ol>
<p>N.b., that the idea behind the <code>custom</code> distribution is actually to use <em>real data</em>. in other words, why fit a distribution if you have actual data? This is implemented in the python version of this package, but not yet in javascript.</p>
<h3 id="normal-distribution" tabindex="-1"><a class="observablehq-header-anchor" href="#normal-distribution">Normal distribution</a></h3>
<div id="cell-587ed566" class="observablehq observablehq--block"></div>
<div id="cell-ae457847" class="observablehq observablehq--block"></div>
<h3 id="lognormal-distribution" tabindex="-1"><a class="observablehq-header-anchor" href="#lognormal-distribution">Lognormal distribution</a></h3>
<div id="cell-edb90f45" class="observablehq observablehq--block"></div>
<div id="cell-20c6309b" class="observablehq observablehq--block"></div>
<h3 id="beta-distribution" tabindex="-1"><a class="observablehq-header-anchor" href="#beta-distribution">Beta distribution</a></h3>
<p>Beta distributions are super flexible. They can be uniform, or resemble lognormal skewed left or right. Play around.</p>
<div id="cell-03fba68e" class="observablehq observablehq--block"></div>
<div id="cell-dd578002" class="observablehq observablehq--block"></div>
<h2 id="operations-on-distributions-for-business-cases" tabindex="-1"><a class="observablehq-header-anchor" href="#operations-on-distributions-for-business-cases">Operations on distributions for business cases</a></h2>
<p>I'm convinced that almmost everyone builds <em>terrible</em> business cases. Every parameter in a business case is actually a distribution. Thus, distributions as an object or entity are important to be able to use, and on which we're able to do some quick math.</p>
<p>Let's say that the prevalence of a disease across counties varies in an approximatly lognormal manner, centered about ~20% prevalence. Let's say it's actually a beta distribution.</p>
<p>Let's create that distribution and visualize it.</p>
<div id="cell-91a92b80" class="observablehq observablehq--block"></div>
<h2 id="let's-explore-chaining" tabindex="-1"><a class="observablehq-header-anchor" href="#let's-explore-chaining">Let's explore chaining</a></h2>
<div id="cell-77300cec" class="observablehq observablehq--block"></div>
<p>Let's add two distributions together.</p>
<pre data-language="javascript"><code class="language-javascript"><span class="hljs-comment">// Chain operations</span>
<span class="hljs-keyword">const</span> addResult = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistP</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Normal + Lognormal"</span>,
    <span class="hljs-attr">samples</span>: [...normalBase.<span class="hljs-property">samples</span>],
    <span class="hljs-attr">size</span>: <span class="hljs-number">5000</span>
}).<span class="hljs-title function_">chainAdd</span>(uniformDist);
<span class="hljs-title function_">view</span>(addResult.<span class="hljs-title function_">plot</span>())
</code></pre>
<div id="cell-8031f6ed" class="observablehq observablehq--block"></div>
<p>Let's multiply two distributions together.</p>
<pre data-language="javascript"><code class="language-javascript"><span class="hljs-comment">// Chain operations</span>
<span class="hljs-keyword">const</span> multResult = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistP</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Normal × Uniform"</span>,
    <span class="hljs-attr">samples</span>: [...normalBase.<span class="hljs-property">samples</span>],
    <span class="hljs-attr">size</span>: <span class="hljs-number">5000</span>
}).<span class="hljs-title function_">chainMult</span>(uniformDist);

<span class="hljs-comment">//plot it</span>
<span class="hljs-title function_">view</span>(multResult.<span class="hljs-title function_">plot</span>())
</code></pre>
<div id="cell-a4a54ee6" class="observablehq observablehq--block"></div>
<p>Let's divide two distributions.</p>
<pre data-language="javascript"><code class="language-javascript"><span class="hljs-keyword">const</span> divResult = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistP</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Normal ÷ Uniform"</span>,
    <span class="hljs-attr">samples</span>: [...normalBase.<span class="hljs-property">samples</span>],
    <span class="hljs-attr">size</span>: <span class="hljs-number">5000</span>,
}).<span class="hljs-title function_">chainDivide</span>(uniformDist);

<span class="hljs-comment">//plot it</span>
<span class="hljs-title function_">view</span>(multResult.<span class="hljs-title function_">plot</span>())
</code></pre>
<div id="cell-47e5da48" class="observablehq observablehq--block"></div>
</main>
<footer id="observablehq-footer">
<nav><a rel="prev" href="./live-table-data"><span>Live Tables</span></a><a rel="next" href="./pbpk"><span>Drug Elimination</span></a></nav>
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2024-11-17T16:41:47">Nov 17, 2024</a>.</div>
</footer>
</div>
