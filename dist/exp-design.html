<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Observable Framework v1.13.0">
<title>Experimental Design | Measurement By Design</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight.dcdbf18e.css">
<link rel="preload" as="style" href="./_observablehq/stdlib/inputs.ea9fd553.css">
<link rel="preload" as="style" href="./_npm/katex@0.16.11/dist/katex.min.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight.dcdbf18e.css">
<link rel="stylesheet" type="text/css" href="./_observablehq/stdlib/inputs.ea9fd553.css">
<link rel="stylesheet" type="text/css" href="./_npm/katex@0.16.11/dist/katex.min.css">
<link rel="modulepreload" href="./_observablehq/client.11aa6b6e.js">
<link rel="modulepreload" href="./_observablehq/runtime.9393ab6d.js">
<link rel="modulepreload" href="./_observablehq/stdlib.95bfbf7e.js">
<link rel="modulepreload" href="./_import/components/styles.5ae71931.js">
<link rel="modulepreload" href="./_import/components/generateHealthcareData.59569be6.js">
<link rel="modulepreload" href="./_import/components/ml-utils.49f0e6d0.js">
<link rel="modulepreload" href="./_node/d3-require@1.3.0/index.45152b81.js">
<link rel="modulepreload" href="./_import/components/FunnelChart.56736e39.js">
<link rel="modulepreload" href="./_import/components/TreeExplore.d56586fd.js">
<link rel="modulepreload" href="./_import/components/AggStats.7b40fa2c.js">
<link rel="modulepreload" href="./_import/components/SankeyFlow.0b51f987.js">
<link rel="modulepreload" href="./_import/components/RandomForestClassifier.1e680409.js">
<link rel="modulepreload" href="./_import/components/parallelmethods.b03db0aa.js">
<link rel="modulepreload" href="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js">
<link rel="modulepreload" href="./_npm/htl@0.3.1/063eb405.js">
<link rel="modulepreload" href="./_observablehq/stdlib/inputs.d397b6a8.js">
<link rel="modulepreload" href="./_observablehq/stdlib/mermaid.b7b51fd9.js">
<link rel="modulepreload" href="./_observablehq/stdlib/tex.c8bffae1.js">
<link rel="modulepreload" href="./_npm/@observablehq/plot@0.6.16/e828d8c8.js">
<link rel="modulepreload" href="./_npm/isoformat@0.2.1/c68fbd73.js">
<link rel="modulepreload" href="./_npm/mermaid@11.4.1/dist/mermaid.esm.min.mjs.940dc0bc.js">
<link rel="modulepreload" href="./_npm/katex@0.16.11/c006fecc.js">
<link rel="modulepreload" href="./_npm/d3@7.9.0/7055d4c5.js">
<link rel="modulepreload" href="./_npm/interval-tree-1d@1.0.4/a62ae5ce.js">
<link rel="modulepreload" href="./_npm/d3-array@3.2.4/e95f898e.js">
<link rel="modulepreload" href="./_npm/d3-axis@3.0.0/d44feff9.js">
<link rel="modulepreload" href="./_npm/d3-brush@3.0.0/5830b12a.js">
<link rel="modulepreload" href="./_npm/d3-chord@3.0.1/84d7b8e9.js">
<link rel="modulepreload" href="./_npm/d3-color@3.1.0/2c0cdfa2.js">
<link rel="modulepreload" href="./_npm/d3-contour@4.0.2/626bedc4.js">
<link rel="modulepreload" href="./_npm/d3-delaunay@6.0.4/00c41b5d.js">
<link rel="modulepreload" href="./_npm/d3-dispatch@3.0.1/b5f7cdc6.js">
<link rel="modulepreload" href="./_npm/d3-drag@3.0.0/b22c5864.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/407f7a1f.js">
<link rel="modulepreload" href="./_npm/d3-ease@3.0.1/6f15f633.js">
<link rel="modulepreload" href="./_npm/d3-fetch@3.0.1/ef1ec490.js">
<link rel="modulepreload" href="./_npm/d3-force@3.0.0/5e1ff060.js">
<link rel="modulepreload" href="./_npm/d3-format@3.1.0/5851d7ef.js">
<link rel="modulepreload" href="./_npm/d3-geo@3.1.1/dcd02767.js">
<link rel="modulepreload" href="./_npm/d3-hierarchy@3.1.2/f1db2593.js">
<link rel="modulepreload" href="./_npm/d3-interpolate@3.0.1/034b7bcb.js">
<link rel="modulepreload" href="./_npm/d3-path@3.1.0/4bb53638.js">
<link rel="modulepreload" href="./_npm/d3-polygon@3.0.1/bbafde58.js">
<link rel="modulepreload" href="./_npm/d3-quadtree@3.0.1/aa5b35a8.js">
<link rel="modulepreload" href="./_npm/d3-random@3.0.1/32c7fec2.js">
<link rel="modulepreload" href="./_npm/d3-scale@4.0.2/567840a0.js">
<link rel="modulepreload" href="./_npm/d3-scale-chromatic@3.1.0/cf9b720b.js">
<link rel="modulepreload" href="./_npm/d3-selection@3.0.0/5dcd62f4.js">
<link rel="modulepreload" href="./_npm/d3-shape@3.2.0/f8e03c56.js">
<link rel="modulepreload" href="./_npm/d3-time@3.1.0/5bc129e1.js">
<link rel="modulepreload" href="./_npm/d3-time-format@4.1.0/19c92b44.js">
<link rel="modulepreload" href="./_npm/d3-timer@3.0.1/f31b5398.js">
<link rel="modulepreload" href="./_npm/d3-transition@3.0.1/8debb4ba.js">
<link rel="modulepreload" href="./_npm/d3-zoom@3.0.0/4b0cc581.js">
<link rel="modulepreload" href="./_npm/binary-search-bounds@2.0.5/1ee6c50d.js">
<link rel="modulepreload" href="./_npm/internmap@2.0.3/5eed35fd.js">
<link rel="modulepreload" href="./_npm/delaunator@5.0.1/e67acb27.js">
<link rel="modulepreload" href="./_npm/robust-predicates@3.0.2/8ac9039b.js">
<script type="module">

import {define} from "./_observablehq/client.11aa6b6e.js";

define({id: "d19a1792", inputs: ["html"], outputs: ["defaultStyles","styleElement"], body: async (html) => {
const {defaultStyles} = await import("./_import/components/styles.5ae71931.js");
// import some CSS to keep things well styled
const styleElement = html`<style>
  ${defaultStyles}
</style>`;
document.head.appendChild(styleElement);
return {defaultStyles,styleElement};
}});

define({id: "7381e00e", outputs: ["generateHealthcareData","CONSTANTS","calculateImageUse","prepareImagingData","stratifiedSubsample","getRandomSubsample","computeMeanAndCI","computeROC","require","FunnelChart","createTreeWithStats","calculateStats","createFunnelData","formatNumber","createMulticlassMetric","createRateMetric","createDemographicMetrics","aggregateData","createDataSummary","createIntMetric","createFloatMetric","createSankeyFlow","RandomForestClassifier"], body: async () => {
const [{generateHealthcareData, CONSTANTS, calculateImageUse}, {prepareImagingData, stratifiedSubsample, getRandomSubsample, computeMeanAndCI, computeROC}, {require}, {FunnelChart}, {createTreeWithStats, calculateStats, createFunnelData, formatNumber}, {createMulticlassMetric, createRateMetric, createDemographicMetrics, aggregateData, createDataSummary, createIntMetric, createFloatMetric}, {createSankeyFlow}, {RandomForestClassifier}] = await Promise.all([import("./_import/components/generateHealthcareData.59569be6.js"), import("./_import/components/ml-utils.49f0e6d0.js"), import("./_node/d3-require@1.3.0/index.45152b81.js"), import("./_import/components/FunnelChart.56736e39.js"), import("./_import/components/TreeExplore.d56586fd.js"), import("./_import/components/AggStats.7b40fa2c.js"), import("./_import/components/SankeyFlow.0b51f987.js"), import("./_import/components/RandomForestClassifier.1e680409.js")]);
// import data gen and consts


return {generateHealthcareData,CONSTANTS,calculateImageUse,prepareImagingData,stratifiedSubsample,getRandomSubsample,computeMeanAndCI,computeROC,require,FunnelChart,createTreeWithStats,calculateStats,createFunnelData,formatNumber,createMulticlassMetric,createRateMetric,createDemographicMetrics,aggregateData,createDataSummary,createIntMetric,createFloatMetric,createSankeyFlow,RandomForestClassifier};
}});

define({id: "0e90d8e6", outputs: ["calculateSampleSizeForMeans","calculateSampleSizeForProportions","calculateVarianceFormulaIndividualRandomized","calculateVarianceFormulaClusterRandomized","generateVarianceData","generateUnifiedVarianceData"], body: async () => {
const {calculateSampleSizeForMeans, calculateSampleSizeForProportions, calculateVarianceFormulaIndividualRandomized, calculateVarianceFormulaClusterRandomized, generateVarianceData, generateUnifiedVarianceData} = await import("./_import/components/parallelmethods.b03db0aa.js");

return {calculateSampleSizeForMeans,calculateSampleSizeForProportions,calculateVarianceFormulaIndividualRandomized,calculateVarianceFormulaClusterRandomized,generateVarianceData,generateUnifiedVarianceData};
}});

define({id: "5892e62b", outputs: ["d3","numeric","require","jStat"], body: async () => {
const [d3, numeric, {require}] = await Promise.all([import("https://cdn.jsdelivr.net/npm/d3@7/+esm"), import("https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"), import("./_node/d3-require@1.3.0/index.45152b81.js")]);
const jStat = await require("jstat@1.9.4");
return {d3,numeric,require,jStat};
}});

define({id: "a82f2f46", inputs: ["mermaid","display"], body: async (mermaid,display) => {
display(await(
await mermaid`graph LR
  direction LR
  PD[Problem
  Definition] --> DS[EDA & ROI]
  DS --> ClinApproval[Hypothesis &
  Recommend Actions]
  ClinApproval--> TargExc[Targeting,
  Exclusions,
  Cohorting]
  TargExc--> ExpDesign1[Experimental
  Design]:::pwcYellow
  ExpDesign1-- Terminate -->DevTerm["Start Over"]:::transparent
  ExpDesign1-- Rethink -->DevReturn["Return to EDA"]:::transparent
  ExpDesign1-- Approval -->ToMarketing["To Marketing"]:::transparent

  classDef pwcYellow fill:#FFB600,stroke:#000000,color:#000000
  classDef transparent fill:#ffffff40,stroke:#00000040,color:#00000040
  linkStyle default color:#00000040`
))
}});

define({id: "bde9b1a8", inputs: ["tex","view"], outputs: ["equation_2"], body: (tex,view) => {
const equation_2 = tex.block` n = \frac{(z_{1-\alpha/2} + z_{\beta})^2 [p_1 (1 - p_1) + p_2 (1 - p_2)]}{(p_1 - p_2)^2} `;

view(equation_2);
return {equation_2};
}});

define({id: "998c0817", inputs: ["view","equation_2"], body: (view,equation_2) => {
view(equation_2);
}});

define({id: "a1a99609", inputs: ["Inputs","tex","view"], outputs: ["Example1Form"], body: (Inputs,tex,view) => {
const Example1Form = Inputs.form({
  z_alpha_2_proportions: Inputs.range([0, 5], {
    value: 1.96,
    step: 0.01,
    label: tex`Z_{1-\alpha/2}`,
  }),
  z_beta_proportions: Inputs.range([0, 5], {
    value: 0.84,
    step: 0.01,
    label: tex`Z_\beta`,
  }),
  p1_proportions: Inputs.range([0, 1], {
    value: 0.22,
    step: 0.01,
    label: tex`p_1`,
  }),

  relative_increase: Inputs.range([-1, 1], {
    value: 0.1,
    step: 0.01,
    label: tex`R_{relative~change}`,
  }),
});
view(Example1Form);
return {Example1Form};
}});

define({id: "11eaa89b", inputs: ["Example1Form_Selections","Inputs","tex","view"], outputs: ["relative_p2_calc","p2_proportions_r"], body: (Example1Form_Selections,Inputs,tex,view) => {
const relative_p2_calc =
  Example1Form_Selections.p1_proportions *
  (1 + Example1Form_Selections.relative_increase);
const p2_proportions_r = Inputs.range([0, 1], {
  value: relative_p2_calc,
  step: 0.01,
  label: tex`p_2`,
  disabled: true,
});
view(p2_proportions_r);
return {relative_p2_calc,p2_proportions_r};
}});

define({id: "a2aa659f", inputs: ["Generators","Example1Form"], outputs: ["Example1Form_Selections"], body: (Generators,Example1Form) => {
const Example1Form_Selections = Generators.input(Example1Form);
return {Example1Form_Selections};
}});

define({id: "6cb7ceae", inputs: ["calculateSampleSizeForProportions","Example1Form_Selections","relative_p2_calc"], outputs: ["n_proportions_wand"], body: (calculateSampleSizeForProportions,Example1Form_Selections,relative_p2_calc) => {
const n_proportions_wand = calculateSampleSizeForProportions(
  Example1Form_Selections.z_alpha_2_proportions,
  Example1Form_Selections.z_beta_proportions,
  Example1Form_Selections.p1_proportions,
  relative_p2_calc
);
return {n_proportions_wand};
}});

define({id: "185a128e", mode: "inline", inputs: ["n_proportions_wand","display"], body: async (n_proportions_wand,display) => {
display(await(
n_proportions_wand
))
}});

define({id: "89b04fc9", mode: "inline", inputs: ["Example1Form_Selections","display"], body: async (Example1Form_Selections,display) => {
display(await(
Example1Form_Selections.relative_increase*100
))
}});

define({id: "20259edc", mode: "inline", inputs: ["Example1Form_Selections","display"], body: async (Example1Form_Selections,display) => {
display(await(
Example1Form_Selections.p1_proportions*100
))
}});

define({id: "599ec92f", mode: "inline", inputs: ["relative_p2_calc","display"], body: async (relative_p2_calc,display) => {
display(await(
relative_p2_calc.toFixed(2)*100
))
}});

define({id: "055c5fd4", inputs: ["view","Inputs","createSankeyFlow"], outputs: ["sankeydata","config","replay","node","replayFn"], body: (view,Inputs,createSankeyFlow) => {
const sankeydata = {
  root: {
    control: {
      // Group without intervention
      a: { preferred: (5751.0 / 3) * 2, non_preferred: (5751.0 / 3) * 1 },
    },
    treatment: {
      // Group with intervention
      b: { preferred: (5751.0 / 3) * 2.5, non_preferred: (5751.0 / 3) * 0.5 },
    },
  },
};

const config = {
  width: 800,
  height: 150,
  particleSize: 3,
  particleSpeed: 5,
  particleSpawnRate: 2,
  particleVerticalSpread: 0.8,
  hideRootLabel: true,
  counterSpacing: 100,
  nodePadding: 50,
  margin: { top: 20, right: 250, bottom: 20, left: -20 },
  bucketColors: {
    preferred: "#FFB600",
    non_preferred: "#D04A02",
  },
};

const replay = view(Inputs.button("Replay"));
const { node, replay: replayFn } = createSankeyFlow(sankeydata, config);
view(node);
return {sankeydata,config,replay,node,replayFn};
}});

define({id: "eba9b1fd", inputs: ["replay","replayFn"], body: (replay,replayFn) => {
replay; // This will trigger the replay when the button is clickeds
replayFn();
}});

</script>
</head>
<body>
<input id="observablehq-sidebar-toggle" type="checkbox" title="Toggle sidebar">
<label id="observablehq-sidebar-backdrop" for="observablehq-sidebar-toggle"></label>
<nav id="observablehq-sidebar">
  <ol>
    <label id="observablehq-sidebar-close" for="observablehq-sidebar-toggle"></label>
    <li class="observablehq-link"><a href="./">Measurement By Design</a></li>
  </ol>
  <div id="observablehq-search"><input type="search" placeholder="Search"></div>
  <div id="observablehq-search-results"></div>
  <script>{const o=document.querySelector("#observablehq-search");o.setAttribute("data-shortcut",`${/Mac|iPhone/.test(navigator.platform)?"\u2318":"Alt-"}K`);const t=o.querySelector("input"),r=()=>import("./_observablehq/search.27e94681.js");t.addEventListener("focus",r,{once:!0}),t.addEventListener("keydown",r,{once:!0});const c=document.querySelector("#observablehq-sidebar-toggle");addEventListener("keydown",e=>{(e.code==="KeyK"&&e.metaKey&&!e.altKey&&!e.ctrlKey||e.key==="/"&&!e.metaKey&&!e.altKey&&!e.ctrlKey&&e.target===document.body)&&(c.checked?t.focus():(c.click(),t.focus(),c.click()),t.select(),e.preventDefault())});}</script>
  <ol>
    <li class="observablehq-link"><a href="./">Overview Dashboard</a></li>
  </ol>
  <details open class="observablehq-section-active">
    <summary>Imaging</summary>
    <ol>
    <li class="observablehq-link"><a href="./problem">Problem Definition</a></li>
    <li class="observablehq-link"><a href="./EDA-ROI">EDA &amp; ROI</a></li>
    <li class="observablehq-link"><a href="./hypothesis">Hypothesis</a></li>
    <li class="observablehq-link"><a href="./targeting">Targeting Strategy</a></li>
    <li class="observablehq-link observablehq-link-active"><a href="./exp-design">Experimental Design</a></li>
    <li class="observablehq-link"><a href="./personalization">Personalization</a></li>
    </ol>
  </details>
  <details open>
    <summary>Primitive Assets</summary>
    <ol>
    <li class="observablehq-link"><a href="./state-level-mapping">BRFSS State Level Mapping</a></li>
    <li class="observablehq-link"><a href="./exp-design-figures">Experimental Design Figures</a></li>
    <li class="observablehq-link"><a href="./live-table-data">Live Table</a></li>
    <li class="observablehq-link"><a href="./distp-demo">Distribution Demo</a></li>
    <li class="observablehq-link"><a href="./funnel-chart">Funnel Chart</a></li>
    <li class="observablehq-link"><a href="./intervention-design">Intervention Design</a></li>
    <li class="observablehq-link"><a href="./random-forest">In Browser Random Forests</a></li>
    <li class="observablehq-link"><a href="./mass-balance-business-models">Mass Balance Business Models</a></li>
    <li class="observablehq-link"><a href="./experimental-design">Simple Experimental Design</a></li>
    <li class="observablehq-link"><a href="./microsite">Microsite Demo</a></li>
    <li class="observablehq-link"><a href="./collapsible-cell">Collapsible Cell</a></li>
    </ol>
  </details>
</nav>
<script>{const e=document.querySelector("#observablehq-sidebar"),t=document.querySelector("#observablehq-sidebar-toggle"),r=sessionStorage.getItem("observablehq-sidebar");r?t.checked=r==="true":t.indeterminate=!0;for(const o of document.querySelectorAll("#observablehq-sidebar summary")){const s=o.parentElement;switch(sessionStorage.getItem(`observablehq-sidebar:${o.textContent}`)){case"true":s.open=!0;break;case"false":s.classList.contains("observablehq-section-active")||(s.open=!1);break}}addEventListener("beforeunload",()=>sessionStorage.setItem("observablehq-sidebar-scrolly",`${e.scrollTop}`));const a=sessionStorage.getItem("observablehq-sidebar-scrolly");a!=null&&(e.style.cssText="overflow: hidden;",e.scrollTop=+a,e.style.cssText="");}</script>
<div id="observablehq-center">
<aside id="observablehq-toc" data-selector="h1:not(:first-of-type)[id], h2:first-child[id], :not(h1) + h2[id]">
<nav>
</nav>
</aside>
<main id="observablehq-main" class="observablehq">
<h1 id="experimental-design" tabindex="-1"><a class="observablehq-header-anchor" href="#experimental-design">Experimental Design</a></h1>
<div class="observablehq observablehq--block"><!--:d19a1792:--></div>
<div class="observablehq observablehq--block"><!--:7381e00e:--></div>
<div class="observablehq observablehq--block"><!--:0e90d8e6:--></div>
<div class="observablehq observablehq--block"><!--:5892e62b:--></div>
<figure>
<figcaption>Analytics Process</figcaption>
<div class="observablehq observablehq--block"><observablehq-loading></observablehq-loading><!--:a82f2f46:--></div>
</figure>
<p>Now that we know where the opportunity lays, let's design our experiment to evaluate three design variations: a control (A), an alternative (AA), and an intervention (B). The goal is to measure user preference and identify the most effective design. To ensure valid results, the experiment must be properly sized, considering statistical power and expected effect sizes, to minimize risks of false positives or negatives.</p>
<p>After sizing and conducting the experiment, the results are summarized in the figure. The outcomes indicate the distribution of user preferences ("Preferred" vs. "Non-Preferred") for each design. This data provides actionable insights into how the designs perform relative to each other, guiding decision-making for future implementations.</p>
<p><strong>How many people would we need to observe a relative decrease in non-preferred imaging utilizaitoni with a given statistical certainty?</strong></p>
<figure>
<figcaption><strong>Figure X:</strong> Experimental Design</figcaption>
<div class="observablehq observablehq--block"><!--:bde9b1a8:--></div>
<div class="observablehq observablehq--block"><!--:998c0817:--></div>
<div class="observablehq observablehq--block"><!--:a1a99609:--></div>
<div class="observablehq observablehq--block"><!--:11eaa89b:--></div>
<div class="observablehq observablehq--block"><!--:a2aa659f:--></div>
<div class="observablehq observablehq--block"><!--:6cb7ceae:--></div>
</figure>
<!-- prettier-ignore -->
<p>You would need: <strong><observablehq-loading></observablehq-loading><!--:185a128e:--> participants in each arm </strong> to observe a relative shift of <b><observablehq-loading></observablehq-loading><!--:89b04fc9:-->%</b> in enrollment rate (i.e., a p1 of <observablehq-loading></observablehq-loading><!--:20259edc:-->% and a p2 of <observablehq-loading></observablehq-loading><!--:599ec92f:-->%). Note that the relative increase is a common framing, but one that is somewhat mathematically confusing.</p>
<figure>
<figcaption> <strong> Figure X</strong>: This figure illustrates the outcomes of an A/B/A test comparing the "control" (A), an alternative design (AA), and an intervention design (B). The figure shows the distribution of participants between "Preferred" and "Non-Preferred" outcomes for each design, along with their respective percentages.
</figcaption>
<div class="observablehq observablehq--block"><!--:055c5fd4:--></div>
<div class="observablehq observablehq--block"><!--:eba9b1fd:--></div>
</figure>
</main>
<footer id="observablehq-footer">
<nav><a rel="prev" href="./targeting"><span>Targeting Strategy</span></a><a rel="next" href="./personalization"><span>Personalization</span></a></nav>
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2024-12-06T16:03:30">Dec 6, 2024</a>.</div>
</footer>
</div>
</body>
</html>
